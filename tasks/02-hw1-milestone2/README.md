# Домашнее задание 1. Часть 2.

**Решения принимаются до 9 октября 23:59:59.(9) MSK включительно**.

## Задача

Добавить в сервис, реализованный в первой части ДЗ, поддержку MongoDB для хранения данных.

Также необходимо добавить дополнительный эндпоинт `/maintenance/ping`
для определения готовности сервиса к работе (см. обновленный [microblog.yaml](./microblog.yaml))
Гарантируется, что тесты не стартуют до тех пор, пока сервис не вернёт `200 OK`
с этого эндпоинта.

## Рекоммендации

- если вы не делали [первую часть](../01-hw1-milestone1) домашки, начните с неё.
  Баллов вы за это уже не получите, но это будет хорошим стартом.
  Jenkins-пайплайн для проверки первой домашки всё еще доступен.

- во время старта сервиса в режиме `mongo` создайте индекс для оптимального поиска постов автора.

## Формат сдачи

- Сервис должен быть оформлен в виде **приватного** git-репозитория в организации [hse-system-design](https://github.com/hse-system-design) 
  с реализацией на Go. В корне репозитория должен находиться ``Dockerfile``, описывающий образ сервиса.

- При запуске Docker-образа сервис должен автоматически стартовать в соответствии с установленными переменными
  окружения:

    - `SERVER_PORT` --- номер порта, на котором должен быть доступен API
    - `STORAGE_MODE` --- режим хранения постов, возможно одно из двух значений:
        - `inmemory` --- хранение в памяти (в этом режиме сервис должен себя вести так же, как в первом задании)
        - `mongo` --- хранение в MongoDB. Адрес и название базы данных передаются
          в отдельных переменных окружения (см. ниже)
    - `MONGO_URL` --- адрес для подключения к MongoDB
    - `MONGO_DBNAME` --- название базы данных, которую можно использовать для хранения.

- Критерий сдачи --- успешная сборка Jenkins-джобы http://51.250.71.53/job/hw1-milestone2/
  (логин `student` пароль `student1234!`)

- Успешную сборку нужно сохранить, нажав кнопку "Keep this build forever",
  и загрузить в форму https://forms.gle/Yg8SPRTnkJ41MKmN6.

- Убедиться, что вы отправили решение, можно в [этой таблице](https://docs.google.com/spreadsheets/d/1Ls98pppmQjWXE0p-4isKWD0YRFfMtFdQanOEJk_5wfA?usp=sharing)
